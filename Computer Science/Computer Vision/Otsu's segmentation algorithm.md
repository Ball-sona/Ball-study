# 이미지 처리

## Otsu's segmentation algorithm

Otsu's segmentation algorithm 는 이미지 처리에 사용되는 기법 중 하나로, 이미지의 히스토그램을 이용해서 이미지를 두 개의 클래스로 가장 잘 분할하는 intensity 값이 얼마인지 찾는 작업이다. 

이 알고리즘은 영상의 픽셀 값 분포를 이용하여 임계 값을 선택함으로써 두 클래스(전경과 배경) 간의 분산이 최소화되거나 클래스 간의 분산 비율이 최대화되도록 한다. 이로써 이미지의 전경과 배경을 가장 잘 구분할 수 있는 최적의 임계값을 찾아내는 것이 목표이다.

### 알고리즘 해석

![스크린샷 2023-05-01 23 02 30](https://user-images.githubusercontent.com/67703882/235463004-448a6111-ab59-426d-aef9-b7600a0cb594.png)



총 255개의 intensity level(1~254) 값을 갖고 있는 이미지가 있다. 우리는 해당 값들 중 특정 값을 역치값으로 정한 후, 그 값을 기준으로 이 이미지를 두개의 클래스(C0, C1)로 분할할 것이다. 

각각 특정 픽셀이 `C0` 와 `C1` 클래스에 속할 확률을 `w0`와 `w1` 라고 하자.

또 `C0` 와 `C1` 클래스에 속하는 픽셀들의 평균 intensity level을 각각 `μ0` 와 `μ1` 이라고 하자.

이제 전체 이미지의 


$$

$$


1. 이미지의 히스토그램을 구한다. 

   L개의 intensity level 값(0~L-1)을 갖고 있는 M*N 크기의 이미지가 있다고 하자. Intensity 값 i를 갖고 있는 픽셀의 개수를 n_i 라고 하면, 이미지 픽셀의 개수는 n_0 + n_1 + ... n_{L-1}와 같을 것이다. 따라서 전체의 픽셀 개수를 n_i로 나누어주면 히스토그램을 얻을 수 있다.

   ```
   p_i = n_i / (M*N)
   ```

   여기서 p_i는 intensity 값을 i로 가지는 픽셀이 이미지에 포함되어 있는 비율이라고 볼 수 있다. 참고로 p_0 + p_1 + p_...{L-1}은 1이다.

2. 이미지를 두개의 클래스로 분할하기 위한 적절한 역치값을 구한다.

   

