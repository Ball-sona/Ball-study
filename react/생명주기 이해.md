# 컴포넌트 생명주기

---

![스크린샷 2022-10-05 22.39.32](/Users/gongsona/Library/Application Support/typora-user-images/스크린샷 2022-10-05 22.39.32.png)

- 총 8개의 생명주기 함수
- 리액트 엔진에서 자동으로 함수 호출 (개발자가 마음대로X)

[컴포넌트 생성 ~ 생성 완료]

1. constructor(props)

- 맨 처음에 생성될 때 <b>한 번만</b> 호출.
- state 또는 객체 변수 선언
- <b>super()을 가장 위에 호출해야한다.</b>

2. render()

- 데이터가 변경되어 새 화면을 그려야 할 때 자동으로 호출.
- render()가 반환하는 JSX를 화면에 그린다.

3. getDerivedStateFromProps(props,state)

- static 함수
- props는 상위 컴포넌트에서 전달된 값, state는 현재 컴포넌트의 state
- 상위 컴포넌트에서 전달받은 프로퍼티로 state값을 연동할때 주로 사용 ?????

4. componentDidMount()

- render()가 화면을 그린 이후에 호출되는 함수.
- <b>컴포넌트가 화면에 모두 표현된 이후에</b> 해야하는 작업들.

[생성완료 ~ 갱신완료]

5. shouldComponentUpdate(nextProps,nextState)

- 프로퍼티를 변경하거나 state값을 변경하면 '화면을 새로 출력해야하는지' 판단하는 함수
- 화면 출력을 새로할지 판단하며, 데이터 변화를 비교하는 작업을 포함하므로 <b>리액트 성능에 영향을 많이 준다.</b>
- 화면 변경을 위한 검증 작업

6. getSnapshotBeforeUpdate(prevProps,prevState) ????

- 컴포넌트의 변경된 내용이 가상 화면에 완성된 이후 호출되는 함수 ??
- 화면이 실제로 출력되기 전에 호출
- DOM 정보에 접근할 떄 사용

7. componentDidUpdate(prevProps,prevState,snapshot) 함수

- 컴포넌트가 실제 화면에 출력된 이후 호출되는 함수
- DOM 정보(ex. 스크롤 위치를 옮기기, 커서 이동하기 등)을 변경할 떄 사용

[갱신완료 ~ 소멸완료]

8. componentWillUnmount()

- 컴포넌트가 소멸되기 직전에 호출되는 함수
- 컴포넌트에서 감시하고 있는 작업들을 해제할 때 필요 (ex. setInterval => clearInterval)
- 해제 작업이 생략되면 메모리 누수 현상 발생

[생성 생명주기 실행 과정]

constructor => getDerivedStateFromProps => render => componentDidMount

[생성 생명주기 실행 과정]

getDerivedStateFromProps => shouldComponentUpdate(true) => render => getSnapshotBeforeUpdate => componentWillUnmount

- componentDidMount()에서 setState함수를 통해 state값을 변경 => 자동으로 shouldComponentUpdate가 true 반환
- shouldComponentUpdate가 false 반환시에는 render부터 생략.
- forceUpdate()를 통해 shouldComponentUpdate의 반환값과 무관하게 화면 동기화 가능

[소멸 생명주기 실행 과정]

componentWillUnMount 실행
